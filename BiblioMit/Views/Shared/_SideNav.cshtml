@using BiblioMit.Views.Components.Nav
@model NavDDwnVM

<li class="nav-item dropdown text-center m-0">
    <button class="btn btn-toggle align-items-center rounded collapsed"
            aria-labelledby="@Model.Title" data-mdb-target="#@Model.Title"
            data-mdb-toggle="collapse">
        <span>
            <i class="@Model.Logo m-0"></i>
            <span class="badge rounded-pill badge-notification bg-primary">@Model.Sections.Sum(s => s.Links.Count)</span>
        </span>
        <span class="small">@Model.Title</span>
    </button>
    <div class="collapse" id="@Model.Title">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
            @foreach (var section in Model.Sections.Select((s, i) => new { s, i }))
            {
                if (section.i > 0)
                {
                    <li>
                        <hr class="dropdown-divider" />
                    </li>
                }
                <li>
                    <div class="dropdown-header">@(section.s.Name):</div>
                </li>
                @foreach (var item in section.s.Links)
                {
                    <li>
                        <a class="dropdown-item"
                           asp-area=""
                           asp-controller="@item.Controller" asp-action="@item.Action">
                            <i class="@item.Icon fa-tw"></i>&emsp;@item.Name
                        </a>
                    </li>
                }
            }
        </ul>
    </div>
</li>