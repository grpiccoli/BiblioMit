function openElement(){var n=element.find(".messages"),t=element.find(".text-box");element.find(">i").hide();element.addClass("expand");element.find(".chat").addClass("enter");t.keydown(onMetaAndEnter).prop("disabled",!1).focus();element.off("click",openElement);element.find(".header button").click(closeElement);element.find("#sendMessage").click(sendNewMessage);n.scrollTop(n.prop("scrollHeight"))}function closeElement(){element.find(".chat").removeClass("enter").hide();element.find(">i").show();element.removeClass("expand");element.find(".header button").off("click",closeElement);element.find("#sendMessage").off("click",sendNewMessage);element.find(".text-box").off("keydown",onMetaAndEnter).prop("disabled",!0).blur();setTimeout(()=>{element.find(".chat").removeClass("enter").show(),element.click(openElement)},500)}function createUUID(){for(var n=[],i="0123456789abcdef",t=0;t<36;t++)n[t]=i.substr(Math.floor(Math.random()*16),1);return n[14]="4",n[19]=i.substr(n[19]&3|8,1),n[8]=n[13]=n[18]=n[23]="-",n.join("")}function sendNewMessage(){var t=$(".text-box"),i=t.html().replace(/\<div\>|\<br.*?\>/ig,"\n").replace(/\<\/div\>/g,"").trim().replace(/\n/g,"<br>"),n;i&&(n=$(".messages"),n.append(['<li class="self">',i,"<\/li>"].join("")),t.html(""),t.focus(),n.finish().animate({scrollTop:n.prop("scrollHeight")},250))}function onMetaAndEnter(n){(n.metaKey||n.ctrlKey)&&n.keyCode===13&&sendNewMessage()}const connection=(new signalR.HubConnectionBuilder).withUrl("/chatHub").build();connection.on("ReceiveMessage",(n,t)=>{const r=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=n+": "+r,i=document.createElement("li");$(i).addClass("self");i.textContent=u;$("#messagesList").append(i)});connection.start().catch(n=>console.error(n.toString()));$("#sendButton").length!==0&&$("#sendButton").click(n=>{const t=$("#userInput").val(),i=$("#messageInput").val();connection.invoke("SendMessage",t,i).catch(n=>console.error(n.toString()));n.preventDefault()});var element=$(".floating-chat"),myStorage=localStorage;myStorage.getItem("chatID")||myStorage.setItem("chatID",createUUID());setTimeout(()=>{element.addClass("enter")},1e3);element.click(openElement);